@model Blog.Domain.Models.Blog.UpdateBlogModel;
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var cats = ViewBag.Categories as List<Category>;
}

<div class="card">
    <div class="card-header">
        <h5 class="card-title">Blog Ekle / Düzenle</h5>
    </div>
    <div class="card-body">
        <form class="row g-3" asp-controller="Blog" asp-action="AddBlog" method="post">
            <input type="hidden" name="id" value="@Model.Id"/>
            <div class="col-12">
                <label for="inputNanme4" class="form-label">Blog Başlığı</label>
                <input type="text" class="form-control" name="title" value="@Model.Title">
            </div>
            <div class="col-12">
                <label for="inputEmail4" class="form-label">İçerik</label>
                <textarea class="form-control" name="content" id="content">@Html.Raw(Model.Content)</textarea>
            </div>
            <div class="col-12">
                <label for="inputEmail4" class="form-label">Görsel</label>
                <input type="text" class="form-control" name="imageUrl" value="@Model.ImageUrl">
            </div>
            <div class="col-12">
                <label for="inputPassword4" class="form-label">Kategorisi</label>
                <select class="form-control catId" name="catId" asp-for="CatId">
                    @foreach (var item in ViewBag.Categories as List<Category>)
                    {
                        <option value="@item.Id" @(item.Id == Model.CatId ? "selected" : "")>@item.Name</option>
                    }
                </select>
            </div>
            <div>
                <label asp-for="IsActive" name="" class="form-check-label">Aktif mi</label>
                <input asp-for="IsActive" checked="@Model.IsActive" name="IsActive" type="checkbox" class="form-check"/>
            </div>
            <div>
                <label asp-for="CreatedDate" class="form-label">Oluşturulma Tarihi</label>
                <input asp-for="CreatedDate" name="CreatedDate"
                       type="datetime-local"
                       class="form-control"
                       value="@Model.CreatedDate.ToString("yyyy-MM-ddTHH:mm")" />
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Kaydet</button>
                <button type="reset" class="btn btn-secondary">Sıfırla</button>
            </div>
        </form><!-- Vertical Form -->

    </div>
</div>
<script src="https://cdn.ckeditor.com/ckeditor5/32.0.0/classic/ckeditor.js"></script>

<script>
    ClassicEditor
        .create(document.querySelector('#content'), {
            ckfinder: {
                uploadUrl: '/Blog/UploadImage',
                options: {
                    resourceType: 'Images'  // Bu ayar resim yüklemesi için gereklidir
                }
            }
        })
        .catch(error => {
            console.error('CKEditor Error:', error);
        });

</script>
